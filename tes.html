
<p></p><h1 id=\"h9707d3a59a\">概要</h1><hr><p><em><u>斜体で下線</u></em></p><p>背景青</p><p>approuter + ChakraUIで開発を進め用と思った際、色々気になったのでまとめます。後々追記予定です！</p>
<h1 id=\"h5c7cf48e04\">コードブロック</h1>

<div data-filename=\"article.js\">
    <pre>
        <code class=\"language-javascript\">
            // src/templates/article.js\nimport React from &quot;react&quot;\nimport { graphql } from &quot;gatsby&quot;\nimport Layout from &quot;../components/layout&quot;\nimport &quot;tailwindcss/tailwind.css&quot;\n\nconst ArticlePost = ({ data, location }) =&gt; {\n  const post = data.microcmsBlogs\n  return (\n    &lt;Layout location={location}&gt;\n      &lt;div className=&quot;max-w-3xl mx-auto p-4&quot;&gt;\n        &lt;h1 className=&quot;text-4xl font-bold mb-4&quot;&gt;{post.title}&lt;/h1&gt;\n        &lt;div\n          className=&quot;prose&quot;\n          dangerouslySetInnerHTML={{ __html: post.content }}\n        &gt;&lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/Layout&gt;\n  )\n}\n\nexport default ArticlePost\n\nexport const query = graphql`\n  query ($blogsId: String!) {\n    microcmsBlogs(blogsId: { eq: $blogsId }) {\n      title\n      content\n      eyecatch {\n        url\n        width\n        height\n      }\n    }\n  }\n`\n

        </code>
    </pre>
</div>


<h1 id=\"hc69c85bcf9\">背景</h1><p>reactの学習が一通り終わり、アプリの作成に進むこととしました。</p><p>デザインに自信がないため、手軽にそれっぽいデザインの使えそうなChakraUI、フレームワークにnextjs(AppRouter)を使うこととしました。</p><p>しかし、調べていく中でChakraUIはAppRouter非対応、あるいは対応済みなどの記事が散見されたので、調査しまとめることにしました。</p><h2 id=\"h8a175a9b0e\">前提</h2><p>React初学者により記事です。また、SSR,SSGなどについては理科している前提の記事となります</p><hr><h1 id=\"hb62ccc27c7\">AppRouter非対応とはどういう事か</h1><p>非対応とは、approuterとChakraUIの組み合わせではアプリが動かないというわけではなく、next13以降で追加されたAppRouterの機能が使えないということになります。</p><p>具体的にはリアクトサーバーコンポーネント（RSC）が使えないということになります。裏を返せば、appディレクトリを用いたルーティング設定などは問題なくできます（Linkタグによる画面遷移には別途専用ライブラリの利用が必要となります。）</p><h2 id=\"h073c2f1d6b\">RSC(ReactServerComponent)とは</h2><p>![image.png](<a href=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2910804/c6d3b436-01c4-c9fd-6202-ab1781471317.png\">https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2910804/c6d3b436-01c4-c9fd-6202-ab1781471317.png</a>)</p><p>ざっくりこんなイメージです。</p><p>RSCとはnex13以降追加されたものであり、これを指定するとサーバーサイドでフロントエンドのAPIなどに依存しないコンテンツを前もって生成できます。これはサーバーサイドですでに完成済みとなるため、表示が高速かつ軽量です。</p><p>next13以前は、ページ単位でSSG,SSRの選択をしていましが、</p><p>AppRouterを使用することで、上記に合わせてコンポーネント単位でRSCを利用するか従来型のコンポーネント（以降これをクライアントコンポーネントと呼ぶ）を利用するか指定できる用になりました。</p><h3 id=\"h6fe9048c57\">RSCとクライアントコンポーネントの比較</h3><p>この辺りに関しては、より詳細に解説されている記事が多数ありますので、詳細については割愛させていただきますが、イメージとしてはRSCはサーバーサイドで完全に静的生成が完了できるコンポーネントで、クライアントコンポーネントはクライアント側でハイドレーションが必要なコンポーネントとなります。</p><p>従来は全てのコンポーネントが後者であったため、静的生成したとしても、同時にjsをフロントに返す必要があり、フロントサイドでハイドレーションされることによって完全に動作する画面が完成するようになっていましたが、RSCによってフロントに返すjsを減らし処理を軽量化できるようになりました。</p><h2 id=\"h2a334e402c\">ChakraUIとRSC</h2><p>それではなぜChakraUIではRSCが使えないのでしょうか。</p><p>それはChakraコンポーネントがフロント側のwebAPIに依存しているためです。そのため、ChakraUIのコンポーネントは全てクライアントコンポーネントとなります。</p><p>以下の画像のようなイメージで、全てのコンポーネントがレンダリングされます。</p><p>![image.png](<a href=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2910804/0075a2d1-4c25-3549-9ca3-937b818afa7d.png\">https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2910804/0075a2d1-4c25-3549-9ca3-937b818afa7d.png</a>)</p><hr><h1 id=\"h310540a73b\">私の結論</h1><p>ChakraUIを使用すると、AppRouterの機能が十分に使えないため、ネガティブな意見が多くあるかと思います。一方で個人開発のサイトレベルで言えばユーザビリティをそこまで突き詰める必要もないため、開発体験を優先しChakraUI + AppRouterの構成で開発を進めます。</p><p>この組み合わせによる不都合などが開発を進める中で発生した場合、追記していきたいと思います。</p><p></p>",
    